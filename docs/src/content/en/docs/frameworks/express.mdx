---
title: "Getting started with Mastra and Express | Mastra Guides"
description: A step-by-step guide to integrating Mastra with an Express backend.
---

import { Callout, Steps, Tabs, FileTree } from "nextra/components";

# Integrate Mastra in your Express project

Mastra integrates with Express, making it easy to:

- Build a flexible APIs to serve AI-powered features
- Maintain full control over your server logic and routing
- Scale your backend independently from your frontend

This guide will help you set up and integrate Mastra agents in your Express app.

<Callout type="warning">
This setup is compatible with the following package versions:
- `express`: 4.x
- `@types/express`: 4.x

TypeScript compatibility issues may occur with version 5.x of either package.
</Callout>

<Steps>
## Install Mastra

Install the `mastra` CLI and `@mastra/core` packages:

<Tabs items={["npm", "yarn", "pnpm", "bun"]}>
  <Tabs.Tab>
  ```bash copy
  npm install mastra@latest @mastra/core
    ```
   </Tabs.Tab>
  <Tabs.Tab>
  ```bash copy
  yarn add mastra@latest @mastra/core
    ```
   </Tabs.Tab>
  <Tabs.Tab>
  ```bash copy
  pnpm add mastra@latest @mastra/core
  ```
  </Tabs.Tab>
<Tabs.Tab>
  ```bash copy
  bun add mastra@latest @mastra/core
  ```
  </Tabs.Tab>
</Tabs>

## Initialize Mastra

Then run the initialization command:

```bash copy
npx mastra@latest init
```

When prompted, follow the example below to scaffold the default Weather agent.

```bash
Where should we create the Mastra files? (default: src/)
  src/
Choose components to install:
  ● Agents (recommended)
  ◯ Tools
  ◯ Workflows
Add tools?
  ● Yes / ◯ No
Select default provider:
  ● OpenAI (recommended)
  ◯ Anthropic
  ◯ Groq
  ◯ Google
  ○ Cerebra
Enter your openai API key?
  ● Skip for now (default)
  ○ Enter API key
Add example
  ● Yes / ○ No
Make your AI IDE into a Mastra expert? (installs Mastra docs MCP server)
  ● Skip for now (default)
  ○ Cursor (project only)
  ○ Cursor (global, all projects)
  ○ Windsurf
```

Add the `dev` and `build` scripts to `package.json`:

```json filename="package.json"
{
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "dev": "mastra dev",
    "build": "mastra build"
  }
}
```

## Initialize TypeScript

Create a `tsconfig.json` file in your project root with the following configuration:

```json filename="tsconfig.json" copy
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ES2022",
    "moduleResolution": "bundler",
    "esModuleInterop": true,
    "forceConsistentCasingInFileNames": true,
    "strict": true,
    "skipLibCheck": true,
    "outDir": "dist"
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", ".mastra"]
}
```

> This TypeScript configuration is optimized for Mastra projects, using modern module resolution and strict type checking.

## Set Up API Key

```bash filename=".env" copy
OPENAI_API_KEY=<your-api-key>
```
> Replace `your-api-key` with your API key.

## Start the Mastra Dev Server

Mastra provides commands to serve your agents via REST endpoints. To start the Mastra server, run:

<Tabs items={["npm", "CLI"]}>
  <Tabs.Tab>
  ```bash copy
  npm run dev
   ```
   </Tabs.Tab>
  <Tabs.Tab>
  ```bash copy
  mastra dev
   ```
   </Tabs.Tab>
</Tabs>

This command creates REST API endpoints for your agents which are available on the following links:

- Playground: [http://localhost:4111/](http://localhost:4111/)
- Mastra API: [http://localhost:4111/api](http://localhost:4111/api)
- OpenAPI Spec: [http://localhost:4111/openapi.json](http://localhost:4111/openapi.json)
- Swagger UI – API explorer: [http://localhost:4111/swagger-ui](http://localhost:4111/swagger-ui)

## Example Express App

```typescript filename="src/server.ts" showLineNumbers copy
import "dotenv/config";
import express, { Request, Response } from "express";

import { mastra } from "./mastra";

const app = express();
const port = process.env.PORT ?? 3000;

app.get("/api/weather", async (req: Request, res: Response) => {
  const { city } = req.query as { city?: string };

  if (!city) {
    return res.status(400).send("Missing 'city' query parameter");
  }

  const agent = mastra.getAgent("weatherAgent");

  try {
    const result = await agent.generate(`What's the weather like in ${city}?`);
    res.send(result.text);
  } catch (error) {
    res.status(500).send(`Agent error: ${error}`);
  }
});

app.listen(port, () => {
  console.log(`Server listening on port ${port}`);
});
```

With the Mastra dev server running, start your Express app. For example:

```bash
npx tsx --watch src/server.ts --watch-dir src
```

You can now make a request to the endpoint using one of the following:

<Tabs items={["http", "curl"]}>
  <Tabs.Tab>
  ```bash copy
  http://localhost:3000/api/weather?city=London
   ```
   </Tabs.Tab>
  <Tabs.Tab>
  ```bash copy
  curl "http://localhost:3000/api/weather?city=London"
   ```
   </Tabs.Tab>
</Tabs>

You should see output similar to the following:

```plaintext
Agent response: The current weather in London is as follows:

- **Temperature:** 12.9°C (Feels like 9.7°C)
- **Humidity:** 63%
- **Wind Speed:** 14.7 km/h
- **Wind Gusts:** 32.4 km/h
- **Conditions:** Overcast

Let me know if you need more information!
```
</Steps>

## Use Mastra on the Client

To call your agents from the frontend, use our type-safe Mastra Client SDK.

- [Mastra Client SDK](/docs/deployment/client)
